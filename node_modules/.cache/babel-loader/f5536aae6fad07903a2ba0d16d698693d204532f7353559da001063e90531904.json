{"ast":null,"code":"import _objectSpread from\"/Users/mohanraoboddu/Downloads/app 2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);// Load authentication state from localStorage on app startup\nuseEffect(()=>{const token=localStorage.getItem('token');const userData=localStorage.getItem('user');if(token&&userData){try{const parsedUser=JSON.parse(userData);setUser(parsedUser);setIsAuthenticated(true);}catch(error){console.error('Error parsing user data from localStorage:',error);localStorage.removeItem('token');localStorage.removeItem('user');}}setLoading(false);},[]);const login=(userData,token)=>{setUser(userData);setIsAuthenticated(true);// Store in localStorage for persistence\nlocalStorage.setItem('user',JSON.stringify(userData));if(token){localStorage.setItem('token',token);}};const logout=()=>{setUser(null);setIsAuthenticated(false);// Clear localStorage\nlocalStorage.removeItem('user');localStorage.removeItem('token');};const updateProfile=profileData=>{const updatedUser=_objectSpread(_objectSpread({},user),profileData);setUser(updatedUser);// Update localStorage with new profile data\nlocalStorage.setItem('user',JSON.stringify(updatedUser));};const value={isAuthenticated,user,login,logout,updateProfile,loading};// Show loading spinner while checking authentication\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading...\"})]})});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};// Component to protect routes that require authentication\nexport const AuthGuard=_ref2=>{let{children}=_ref2;const{isAuthenticated}=useAuth();if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Please log in to access this page.\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"inline-block bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\",children:\"Go to Login\"})]})});}return children;};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","token","localStorage","getItem","userData","parsedUser","JSON","parse","error","console","removeItem","login","setItem","stringify","logout","updateProfile","profileData","updatedUser","_objectSpread","value","className","Provider","AuthGuard","_ref2","href"],"sources":["/Users/mohanraoboddu/Downloads/app 2/frontend/src/components/AuthGuard.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Load authentication state from localStorage on app startup\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const userData = localStorage.getItem('user');\n    \n    if (token && userData) {\n      try {\n        const parsedUser = JSON.parse(userData);\n        setUser(parsedUser);\n        setIsAuthenticated(true);\n      } catch (error) {\n        console.error('Error parsing user data from localStorage:', error);\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n      }\n    }\n    setLoading(false);\n  }, []);\n\n  const login = (userData, token) => {\n    setUser(userData);\n    setIsAuthenticated(true);\n    // Store in localStorage for persistence\n    localStorage.setItem('user', JSON.stringify(userData));\n    if (token) {\n      localStorage.setItem('token', token);\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    setIsAuthenticated(false);\n    // Clear localStorage\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n  };\n\n  const updateProfile = (profileData) => {\n    const updatedUser = { ...user, ...profileData };\n    setUser(updatedUser);\n    // Update localStorage with new profile data\n    localStorage.setItem('user', JSON.stringify(updatedUser));\n  };\n\n  const value = {\n    isAuthenticated,\n    user,\n    login,\n    logout,\n    updateProfile,\n    loading\n  };\n\n  // Show loading spinner while checking authentication\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Component to protect routes that require authentication\nexport const AuthGuard = ({ children }) => {\n  const { isAuthenticated } = useAuth();\n  \n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Authentication Required</h2>\n          <p className=\"text-gray-600 mb-4\">Please log in to access this page.</p>\n          <a\n            href=\"/login\"\n            className=\"inline-block bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\"\n          >\n            Go to Login\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return children;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}